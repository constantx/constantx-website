// this is a recursive function
// it calculates the leading for a targeted line-height
// if target_leading is less then one normal line for that fontSize
// it'll try to add an extra half line via base_leading
_calcLeading(target_leading, fontSize)
  result = target_leading/fontSize
  if result < 1
    result = _calcLeading(target_leading + (base_leading/2), fontSize)
  else
    return result

setHeading(fontSize)
  font-size: (fontSize)em
  line-height: _calcLeading(base_leading, fontSize)

.has-ligature
  -moz-font-feature-settings: "liga=1, dlig=1"
  -ms-font-feature-settings: "liga", "dlig"
  -o-font-feature-settings: "liga", "dlig"
  -webkit-font-feature-settings: "liga", "dlig"
  font-feature-settings: "liga", "dlig"

.has-shadow
  text-shadow: 0 0.1em 0.1em rgba(0,0,0,0.8)

/*======================================*\
  BASE TYPOGRAPHY
\*======================================*/

body
  font-family: font_text
  font-size: base_font_size_px
  line-height: base_leading
  font-variant-ligatures: common-ligatures
  text-rendering: optimizeLegibility
  -webkit-font-smoothing: subpixel-antialiased
  @media only screen and (min-width: 1024px)
    font-size: 116.67%

h1,h2,h3,h4,h5,h6
  font-family: font_heading
  font-weight: bold
  margin: 0
  @extend .has-ligature
  &.centered
    text-align: center

h1
  setHeading(3.375)
h2
  setHeading(2.081)
h3
  setHeading(1.5)
h4
  setHeading(1.387)
h5
  setHeading(1)
h6
  setHeading(0.925)

p
  text-rendering: optimizeLegibility
  margin-bottom: 1em

a
  color: color_text
  text-decoration: none
  @extend .has-ligature

p, ul, ol
  a
    border-bottom: solid 2px color_main
    transition: border-color 0.2s ease-in
    &:hover
      border-bottom-color: color_main_cool
  em
    font-style: italic
  strong
    font-weight: bold

  @extend .has-ligature

.heading
strong
  font-weight: bold

blockquote
  margin-left: 0
  margin-right: 0
  position: relative
